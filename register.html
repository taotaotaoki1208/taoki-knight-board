<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="favicon.ico">
  <title>é™¶å‰é¨å£«åœ˜ä»»å‹™æ¿ - è¨»å†Š</title>
  <meta name="description" content="å»ºç«‹é™¶å‰é¨å£«åœ˜å¸³è™Ÿï¼Œé–‹å§‹åœ¨æ ¡åœ’è£¡ç™¼å¸ƒèˆ‡æ¥å–ä»»å‹™ã€‚">

  <meta property="og:type" content="website">
  <meta property="og:title" content="è¨»å†Š - é™¶å‰é¨å£«åœ˜ä»»å‹™æ¿">
  <meta property="og:description" content="åªé™å­¸æ ¡åŒå­¸ä½¿ç”¨çš„ä»»å‹™å¹³å°ï¼Œè¨»å†Šå¾Œå³å¯ç™¼å¸ƒèˆ‡æ¥å–®ã€‚">
  <meta property="og:url" content="https://taotaotaoki1208.github.io/taoki-knight-board/register.html">
  <meta property="og:site_name" content="é™¶å‰é¨å£«åœ˜ä»»å‹™æ¿">
  <meta property="og:image" content="https://taotaotaoki1208.github.io/taoki-knight-board/og-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="è¨»å†Š - é™¶å‰é¨å£«åœ˜ä»»å‹™æ¿">
  <meta name="twitter:description" content="å»ºç«‹æ–°å¸³è™Ÿï¼ŒåŠ å…¥é™¶å‰é¨å£«åœ˜ã€‚">
  <meta name="twitter:image" content="https://taotaotaoki1208.github.io/taoki-knight-board/og-image.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-slate-900 text-slate-800">
  <div class="min-h-screen flex flex-col">
    <!-- å°è¦½åˆ— -->
    <header class="border-b border-slate-800 bg-slate-950/90 backdrop-blur">
      <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div
            class="w-9 h-9 rounded-2xl bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-amber-400 flex items-center justify-center text-sm font-extrabold text-white shadow-lg shadow-indigo-500/40">
            é™¶
          </div>
          <div>
            <div class="text-sm font-semibold tracking-wide text-slate-100">
              é™¶å‰é¨å£«åœ˜ä»»å‹™æ¿
            </div>
            <div class="text-xs text-slate-400">
              è¡›é“æ ¡åœ’å§”è¨—å¹³å° â€¢ Taoki
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- å…§å®¹ -->
    <main class="flex-1 flex items-center justify-center px-4 py-6">
      <div class="w-full max-w-lg">
        <div class="bg-white rounded-2xl shadow-xl border border-slate-200 p-6">
          <h1 class="text-xl font-semibold text-slate-900 mb-1">å»ºç«‹æ–°å¸³è™Ÿ</h1>
          <p class="text-sm text-slate-500 mb-4">
            åªæœ‰åŒæ ¡åŒå­¸å¯ä»¥ä½¿ç”¨ï¼ŒçœŸå¯¦è³‡æ–™ä¸æœƒé¡¯ç¤ºçµ¦å…¶ä»–äººã€‚
          </p>

          <form id="registerForm" class="space-y-3">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-xs text-slate-600 mb-1">å­¸æ ¡</label>
                <select
                  id="schoolId"
                  required
                  class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                >
                  <!-- JS æœƒè‡ªå‹•å¡«å…¥ options -->
                </select>
              </div>

              <div>
                <label class="block text-xs text-slate-600 mb-1">éƒ¨åˆ¥</label>
                <select
                  id="schoolLevel"
                  required
                  class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                >
                  <!-- JS æœƒä¾å­¸æ ¡è‡ªå‹•å¡«å…¥ options -->
                </select>
              </div>
            </div>

            <div class="grid grid-cols-3 gap-3">
              <div>
                <label class="block text-xs text-slate-600 mb-1">å¹´ç´š</label>
                <select
                  id="grade"
                  required
                  class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                >
                  <!-- JS ä¾ level è¨­å®šè‡ªå‹•å¡«å…¥ -->
                </select>
              </div>

              <div>
                <label class="block text-xs text-slate-600 mb-1">ç­ç´š</label>
                <select
                  id="classNo"
                  required
                  class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                >
                  <!-- JS ä¾ level è¨­å®šè‡ªå‹•å¡«å…¥ -->
                </select>
              </div>

              <div>
                <label class="block text-xs text-slate-600 mb-1">åº§è™Ÿ</label>
                <input
                  type="number"
                  id="seatNo"
                  required
                  class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                />
                <!-- min / max ç”± JS æ ¹æ“šè¨­å®šå¸¶å…¥ -->
              </div>
            </div>

            <hr class="my-2 border-slate-200" />

            <div>
              <label class="block text-xs text-slate-600 mb-1">æš±ç¨±ï¼ˆé¡¯ç¤ºçµ¦å…¶ä»–äººçš„åç¨±ï¼‰</label>
              <input
                type="text"
                id="nickname"
                required
                class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>

            <div>
              <label class="block text-xs text-slate-600 mb-1">Emailï¼ˆç™»å…¥å¸³è™Ÿï¼‰</label>
              <input
                type="email"
                id="email"
                required
                class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>

            <div>
              <label class="block text-xs text-slate-600 mb-1">å¯†ç¢¼</label>
              <input
                type="password"
                id="password"
                required
                class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>
<!-- ä½¿ç”¨æ¢æ¬¾å‹¾é¸ -->
<div class="flex items-start gap-2 mt-1">
  <input
    type="checkbox"
    id="agreeTerms"
    class="mt-0.5 h-3.5 w-3.5 rounded border-slate-300 text-indigo-500 focus:ring-indigo-500"
  />
  <label for="agreeTerms" class="text-[11px] text-slate-600 leading-relaxed">
    æˆ‘å·²è©³ç´°é–±è®€ä¸¦åŒæ„
    <a href="index.html#terms" class="text-indigo-600 underline underline-offset-2">
      ã€Œé™¶å‰é¨å£«åœ˜ä»»å‹™æ¿ã€ä½¿ç”¨æ¢æ¬¾
    </a>
    èˆ‡å¹³å°è¦ç¯„ã€‚
  </label>
</div>

            <p id="message" class="text-xs text-rose-500 min-h-[1.2rem]"></p>

            <div class="flex items-center justify-between mt-1">
              <button
                type="submit"
                class="inline-flex items-center justify-center rounded-full bg-indigo-500 px-4 py-1.5 text-xs font-semibold text-white shadow-md hover:bg-indigo-400"
              >
                è¨»å†Šå¸³è™Ÿ
              </button>

            <a href="login.html" class="text-xs text-indigo-600 hover:underline">
              å·²æœ‰å¸³è™Ÿï¼Ÿå‰å¾€ç™»å…¥
            </a>
          </div>
          <p id="message" class="text-red-500 text-sm"></p>

<p class="mt-1 text-[11px] text-slate-400">
  â€» è‹¥å¹¾åˆ†é˜å…§æ²’æ”¶åˆ°é©—è­‰ä¿¡ï¼Œè«‹åˆ°åƒåœ¾éƒµä»¶æˆ–ä¿ƒéŠ·éƒµä»¶åŒ£è£¡æ‰¾æ‰¾ï¼Œä¸¦æŒ‰ã€Œé€™ä¸æ˜¯åƒåœ¾éƒµä»¶ã€ã€‚
</p>
        </form>
      </div>
    </div>
  </main>
</div>

<script type="module">
  // 1. åŒ¯å…¥ Firebase SDKï¼ˆç”¨å®˜æ–¹ CDNï¼‰
  import {
    initializeApp
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";

 import {
  getAuth,
  createUserWithEmailAndPassword,
  sendEmailVerification
} from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

  import {
    getFirestore,
    doc,
    setDoc,
    getDoc,
    collection,
    getDocs
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

  // 2. Firebase è¨­å®šï¼ˆè·ŸåŸæœ¬ä¸€æ¨£ï¼‰
  const firebaseConfig = {
    apiKey: "AIzaSyBGbRsMSuSoW4rx11n6T1Kz8KyLTRqzHvU",
    authDomain: "taoki-knight-board.firebaseapp.com",
    projectId: "taoki-knight-board",
    storageBucket: "taoki-knight-board.firebasestorage.app",
    messagingSenderId: "319225747276",
    appId: "1:319225747276:web:5556b601dca17e760121e9"
  };

  // === éƒ¨åˆ¥è¨­å®šï¼šæ‰€æœ‰å­¸æ ¡å…±ç”¨åŒä¸€ä»½æ¨¡æ¿ ===
  // ä¹‹å¾Œå¦‚æœè¦æ”¹ã€ŒæŸé–“å­¸æ ¡ä¸ä¸€æ¨£ã€ï¼Œå¯ä»¥å†æ‹†å‡ºåˆ¥çš„æ¨¡æ¿
  const DEFAULT_LEVEL_TEMPLATES = {
    // åœ‹ä¸­éƒ¨
    junior: {
      label: "åœ‹ä¸­éƒ¨",
      codePrefix: "J",   // å­¸è™Ÿå‰ç¶´ï¼šJ3-12-25
      grades: [1, 2, 3],
      maxClassNo: 17,
      maxSeatNo: 50
    },
    // é«˜ä¸­éƒ¨
    senior: {
      label: "é«˜ä¸­éƒ¨",
      codePrefix: "S",
      grades: [1, 2, 3],
      maxClassNo: 8,
      maxSeatNo: 45
    }
  };

  // Firestore è¼‰å›ä¾†çš„å­¸æ ¡åˆ—è¡¨æœƒå¡åœ¨é€™è£¡
  // key = schoolIdï¼ˆæ–‡ä»¶ IDï¼‰ï¼Œvalue = { id, name, levels: LEVEL_TEMPLATES }
  let SCHOOL_CONFIG = {};

  // 3. åˆå§‹åŒ– Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // å–å¾—è¡¨å–®å…ƒç´ 
  const form = document.getElementById("registerForm");
  const messageEl = document.getElementById("message");

  const schoolSelect = document.getElementById("schoolId");
  const levelSelect = document.getElementById("schoolLevel");
  const gradeSelect = document.getElementById("grade");
  const classSelect = document.getElementById("classNo");
  const seatInput = document.getElementById("seatNo");

  // âœ… åŒæ„æ¢æ¬¾ checkbox
  const agreeTerms = document.getElementById("agreeTerms");

  // å°å·¥å…·ï¼šä¾éƒ¨åˆ¥ç”¢ç”Ÿå¹´ç´šé¡¯ç¤ºæ–‡å­—
  function getGradeLabel(levelKey, grade) {
    const zh = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­"];

    if (levelKey === "junior") {
      return `åœ‹${zh[grade - 1] || grade}`;
    }
    if (levelKey === "senior") {
      return `é«˜${zh[grade - 1] || grade}`;
    }
    return `${grade} å¹´ç´š`;
  }

  // ğŸ”¸ å¾ Firestore è®€å– schools é›†åˆï¼Œå»ºç«‹ SCHOOL_CONFIG + å­¸æ ¡ä¸‹æ‹‰é¸å–®
    async function loadSchoolsFromFirestore() {
    try {
      schoolSelect.innerHTML = "";
      SCHOOL_CONFIG = {};

      const snap = await getDocs(collection(db, "schools"));

      snap.forEach((docSnap) => {
        const data = docSnap.data() || {};
        if (data.enabled === false) return;

        const schoolId = docSnap.id;
        const name = data.name || "æœªå‘½åå­¸æ ¡";

        // â­ å¾ Firestore è®€å–æ¯é–“å­¸æ ¡è‡ªå·±çš„ levels
        let levels = data.levels;

        // å¦‚æœé€™é–“å­¸æ ¡æ²’æœ‰è¨­å®š levelsï¼Œå°±ç”¨é è¨­çš„
        if (!levels || typeof levels !== "object") {
          levels = DEFAULT_LEVEL_TEMPLATES;
        }

        SCHOOL_CONFIG[schoolId] = {
          id: schoolId,
          name,
          levels
        };
      });

      // å¦‚æœå®Œå…¨æ²’æœ‰è³‡æ–™ï¼Œå°±æ”¾ä¸€å€‹é è¨­
      if (Object.keys(SCHOOL_CONFIG).length === 0) {
        SCHOOL_CONFIG["weidao"] = {
          id: "weidao",
          name: "è¡›é“ä¸­å­¸ï¼ˆé è¨­ï¼‰",
          levels: DEFAULT_LEVEL_TEMPLATES
        };
      }

      populateSchoolOptions();
      populateLevelOptions();
      applyLevelConfig();
    } catch (err) {
      console.error("è¼‰å…¥å­¸æ ¡åˆ—è¡¨å¤±æ•—ï¼š", err);
      messageEl.textContent = "ç„¡æ³•è¼‰å…¥å­¸æ ¡åˆ—è¡¨ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";

      if (Object.keys(SCHOOL_CONFIG).length === 0) {
        SCHOOL_CONFIG["weidao"] = {
          id: "weidao",
          name: "è¡›é“ä¸­å­¸ï¼ˆé›¢ç·šé è¨­ï¼‰",
          levels: DEFAULT_LEVEL_TEMPLATES
        };
        populateSchoolOptions();
        populateLevelOptions();
        applyLevelConfig();
      }
    }
  }


  // ä¾æ“š SCHOOL_CONFIG åˆå§‹åŒ–å­¸æ ¡é¸å–®
  function populateSchoolOptions() {
    schoolSelect.innerHTML = "";

    Object.values(SCHOOL_CONFIG).forEach((schoolCfg) => {
      const opt = document.createElement("option");
      opt.value = schoolCfg.id;
      opt.textContent = schoolCfg.name;
      schoolSelect.appendChild(opt);
    });

    const firstSchoolId = Object.keys(SCHOOL_CONFIG)[0];
    if (firstSchoolId) {
      schoolSelect.value = firstSchoolId;
    }
  }

  // æ ¹æ“šå­¸æ ¡å¡«å…¥éƒ¨åˆ¥é¸é …
  function populateLevelOptions() {
    const schoolId = schoolSelect.value;
    const schoolCfg = SCHOOL_CONFIG[schoolId];
    levelSelect.innerHTML = "";

    if (!schoolCfg) return;

    const levelKeys = Object.keys(schoolCfg.levels);
    levelKeys.forEach((key) => {
      const levelCfg = schoolCfg.levels[key];
      const opt = document.createElement("option");
      opt.value = key;
      opt.textContent = levelCfg.label || key;
      levelSelect.appendChild(opt);
    });

    if (levelKeys.length > 0) {
      levelSelect.value = levelKeys[0];
    }
  }

  // æ ¹æ“šç›®å‰å­¸æ ¡ + éƒ¨åˆ¥ï¼Œå¡«å…¥å¹´ç´š / ç­ç´š / åº§è™Ÿé™åˆ¶
  function applyLevelConfig() {
    const schoolId = schoolSelect.value;
    const schoolCfg = SCHOOL_CONFIG[schoolId];
    if (!schoolCfg) return;

    const levelKey = levelSelect.value;
    const levelCfg = schoolCfg.levels[levelKey];
    if (!levelCfg) return;

    // å¹´ç´šé¸å–®
    gradeSelect.innerHTML = "";
    levelCfg.grades.forEach((g) => {
      const opt = document.createElement("option");
      opt.value = String(g);
      opt.textContent = getGradeLabel(levelKey, g);
      gradeSelect.appendChild(opt);
    });

    // ç­ç´šé¸å–®ï¼ˆ1 ~ maxClassNoï¼‰
    classSelect.innerHTML = "";
    for (let c = 1; c <= levelCfg.maxClassNo; c++) {
      const opt = document.createElement("option");
      opt.value = String(c);
      opt.textContent = `${c} ç­`;
      classSelect.appendChild(opt);
    }

    // åº§è™Ÿè¼¸å…¥é™åˆ¶
    seatInput.min = "1";
    seatInput.max = String(levelCfg.maxSeatNo);
    seatInput.placeholder = `1ï½${levelCfg.maxSeatNo} è™Ÿ`;

    if (seatInput.value) {
      const currentSeat = parseInt(seatInput.value, 10);
      if (
        isNaN(currentSeat) ||
        currentSeat < 1 ||
        currentSeat > levelCfg.maxSeatNo
      ) {
        seatInput.value = "";
      }
    }
  }

  // åˆå§‹åŒ–æ•´å€‹å­¸æ ¡ / éƒ¨åˆ¥ / å¹´ç´š / ç­ç´š / åº§è™Ÿ UI
  async function initSchoolForm() {
    await loadSchoolsFromFirestore();
  }

  // ç¶å®šå­¸æ ¡ / éƒ¨åˆ¥è®Šæ›´äº‹ä»¶
  schoolSelect.addEventListener("change", () => {
    populateLevelOptions();
    applyLevelConfig();
  });

  levelSelect.addEventListener("change", () => {
    applyLevelConfig();
  });

  // ä¸€é–‹å§‹å…ˆåˆå§‹åŒ–ä¸€æ¬¡ï¼ˆæœƒå» Firestore æŠ“ schoolsï¼‰
  initSchoolForm();

  // è¡¨å–®é€å‡º
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    messageEl.textContent = "";

    // âœ… æª¢æŸ¥æ˜¯å¦å‹¾é¸ä½¿ç”¨æ¢æ¬¾
    if (!agreeTerms || !agreeTerms.checked) {
      messageEl.textContent = "è«‹å…ˆå‹¾é¸ã€Œæˆ‘å·²é–±è®€ä¸¦åŒæ„ä½¿ç”¨æ¢æ¬¾ã€ã€‚";
      return;
    }

    const schoolId = schoolSelect.value;
    const schoolLevel = levelSelect.value;
    const grade = parseInt(gradeSelect.value, 10);
    const classNo = parseInt(classSelect.value, 10);
    const seatNo = parseInt(seatInput.value, 10);
    const nickname = document.getElementById("nickname").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    const schoolCfg = SCHOOL_CONFIG[schoolId];
    if (!schoolCfg) {
      messageEl.textContent = "æ‰¾ä¸åˆ°å­¸æ ¡è¨­å®šï¼ˆschoolId ç„¡æ•ˆï¼‰ã€‚";
      return;
    }

    const levelCfg = schoolCfg.levels[schoolLevel];
    if (!levelCfg) {
      messageEl.textContent = "æ‰¾ä¸åˆ°æ­¤éƒ¨åˆ¥çš„è¨­å®šã€‚";
      return;
    }

    // æª¢æŸ¥å¹´ç´š
    if (!levelCfg.grades.includes(grade)) {
      messageEl.textContent = `å¹´ç´šå¿…é ˆæ˜¯ ${levelCfg.grades.join("ã€")}ã€‚`;
      return;
    }

    // æª¢æŸ¥ç­ç´š
    if (classNo < 1 || classNo > levelCfg.maxClassNo) {
      messageEl.textContent = `ç­ç´šå¿…é ˆåœ¨ 1ï½${levelCfg.maxClassNo} ç­ä¹‹é–“ã€‚`;
      return;
    }

    // æª¢æŸ¥åº§è™Ÿ
    if (seatNo < 1 || seatNo > levelCfg.maxSeatNo) {
      messageEl.textContent = `åº§è™Ÿå¿…é ˆåœ¨ 1ï½${levelCfg.maxSeatNo} è™Ÿä¹‹é–“ã€‚`;
      return;
    }

    try {
      // ç”¨å­¸æ ¡ + éƒ¨åˆ¥ + å¹´ç´š + ç­ç´š + åº§è™Ÿ çµ„å‡ºå”¯ä¸€ key
      const seatKey = `${schoolId}_${schoolLevel}_${grade}_${classNo}_${seatNo}`;

      // âœ… seatKeys collectionï¼Œæ–‡ä»¶ ID = seatKey
      const seatDocRef = doc(db, "seatKeys", seatKey);
      const seatSnap = await getDoc(seatDocRef);

      if (seatSnap.exists()) {
        messageEl.textContent =
          "æ­¤åº§è™Ÿåœ¨æœ¬å­¸æ ¡èˆ‡éƒ¨åˆ¥ä¸­å·²è¨»å†Šå¸³è™Ÿï¼Œè«‹ä¸è¦é‡è¤‡è¨»å†Šã€‚";
        return;
      }

      // å»ºç«‹ Firebase Auth å¸³è™Ÿ
      const userCredential = await createUserWithEmailAndPassword(
        auth,
        email,
        password
      );
      const user = userCredential.user;

      // ç”¨è¨­å®šè¡¨ç”¢ç”Ÿå­¸è™Ÿï¼ˆä¾‹ï¼šJ3-12-25ï¼‰
      const prefix = levelCfg.codePrefix;
      const studentCode = `${prefix}${grade}-${classNo}-${seatNo}`;

      // å¯«å…¥ Firestore ä½¿ç”¨è€…è³‡æ–™
      await setDoc(doc(db, "users", user.uid), {
        schoolId,
        schoolName: schoolCfg.name,
        schoolLevel, // junior / senior ...
        grade,
        classNo,
        seatNo,
        studentCode,
        seatKey, // ä¿ç•™ seatKeyï¼Œä¹‹å¾ŒæŸ¥è©¢æ–¹ä¾¿
        nickname,
        email,
        createdAt: new Date()
      });

      // åŒæ™‚æŠŠ seatKey é–èµ·ä¾†ï¼ˆä¹‹å¾Œåˆ¥äººå°±ä¸èƒ½ç”¨é€™å€‹åº§è™Ÿï¼‰
      // åŒæ™‚æŠŠ seatKey é–èµ·ä¾†ï¼ˆä¹‹å¾Œåˆ¥äººå°±ä¸èƒ½ç”¨é€™å€‹åº§è™Ÿï¼‰
      await setDoc(seatDocRef, {
        userId: user.uid,
        schoolId,
        schoolLevel,
        grade,
        classNo,
        seatNo,
        createdAt: new Date()
      });

      // âœ… å¯„é€ Email é©—è­‰ä¿¡
      try {
        await sendEmailVerification(user);
        alert(
          "è¨»å†ŠæˆåŠŸï¼å·²å¯„å‡º Email é©—è­‰ä¿¡ï¼Œè«‹å…ˆåˆ°ä¿¡ç®±é»æ“Šé©—è­‰é€£çµï¼Œå†å›ä¾†ç™»å…¥ã€‚"
        );
      } catch (e) {
        console.error("å¯„é€é©—è­‰ä¿¡å¤±æ•—ï¼š", e);
        alert(
          "è¨»å†ŠæˆåŠŸï¼Œä½†å¯„é€é©—è­‰ä¿¡æ™‚ç™¼ç”Ÿå•é¡Œã€‚\n" +
          "è«‹ç¨å¾Œåˆ°ç™»å…¥é å†è©¦è‘—æŒ‰ã€Œå¿˜è¨˜å¯†ç¢¼ã€æˆ–é‡æ–°ç™»å…¥ä¾†è§¸ç™¼é©—è­‰ä¿¡ã€‚"
        );
      }

      window.location.href = "login.html";
    } catch (error) {
      console.error(error);
      messageEl.textContent = "è¨»å†Šå¤±æ•—ï¼š" + error.message;
    }
  });
</script>
<p class="text-[11px] text-slate-500 mt-6 text-center">
  æœ¬å¹³å°åƒ…ä¾›æ ¡å…§ä»»å‹™åª’åˆä½¿ç”¨ï¼Œæ‰€æœ‰è³‡æ–™åƒ…ä½œç‚ºä»»å‹™ç®¡ç†åŠè¯ç¹«ç”¨é€”ï¼Œä¸æœƒå°å¤–å…¬é–‹æˆ–æä¾›çµ¦ç¬¬ä¸‰æ–¹ã€‚
</p>
</body>
</html>
