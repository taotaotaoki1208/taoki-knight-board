<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="favicon.ico">
  <title>陶吉騎士團任務板 - 校園任務委託平台</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            pageBg: "#020617"
          }
        }
      }
    }
  </script>

  <!-- 共用樣式 -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-pageBg text-slate-100">
  <div class="min-h-screen flex flex-col relative overflow-hidden">
    <!-- 背景光暈特效 -->
    <div class="pointer-events-none absolute -top-40 -right-32 w-80 h-80 bg-indigo-500/30 blur-3xl rounded-full"></div>
    <div class="pointer-events-none absolute top-64 -left-32 w-96 h-96 bg-fuchsia-500/25 blur-3xl rounded-full"></div>
    <div class="pointer-events-none absolute bottom-0 right-1/4 w-72 h-72 bg-amber-400/20 blur-3xl rounded-full"></div>

    <!-- 導覽列 -->
    <header class="relative z-10 border-b border-slate-800/70 bg-slate-950/80 backdrop-blur">
      <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3">
        <!-- 左側 Logo + 標題 -->
        <div class="flex items-center gap-3">
          <div
            class="w-9 h-9 rounded-2xl bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-amber-400 text-sm font-extrabold text-white shadow-lg shadow-indigo-500/40 flex items-center justify-center">
            陶
          </div>
          <div>
            <div class="text-sm font-semibold text-slate-100">
              陶吉騎士團任務板
            </div>
            <div class="text-xs text-slate-400">
              衛道中學校園互助任務平台
            </div>
          </div>
        </div>

        <!-- 右側：導向首頁區塊 + 登入註冊 -->
        <div class="flex items-center gap-2 text-xs sm:text-sm">
          <nav class="hidden sm:flex items-center gap-2 text-slate-300">
            <a href="#features" class="px-2 py-1 rounded-full hover:bg-slate-800/70">
              功能介紹
            </a>
            <a href="#how" class="px-2 py-1 rounded-full hover:bg-slate-800/70">
              使用流程
            </a>
            <a href="#safe" class="px-2 py-1 rounded-full hover:bg-slate-800/70">
              安全機制
            </a>
            <a href="#terms" class="px-2 py-1 rounded-full hover:bg-slate-800/70">
              使用條款
            </a>
            <a
  href="#faq"
  class="px-3 py-1 rounded-full hover:bg-slate-800/70 text-xs sm:text-sm text-slate-200"
>
  Q&A
</a>
            <a href="#report" class="px-2 py-1 rounded-full hover:bg-slate-800/70">
              提問 / 檢舉
            </a>
          </nav>

          <a
            href="login.html"
            class="rounded-full border border-slate-600 px-3 py-1 text-[11px] sm:text-xs text-slate-200 hover:bg-slate-800/80"
          >
            登入
          </a>
          <a
            href="register.html"
            class="rounded-full bg-indigo-500 px-3 py-1 text-[11px] sm:text-xs font-semibold text-white shadow-md hover:bg-indigo-400"
          >
            開始使用
          </a>
        </div>
      </div>
    </header>

    <!-- 主內容 -->
    <main class="relative z-10 flex-1">
      <div class="max-w-5xl mx-auto px-4 py-10 lg:py-16">
        <!-- Hero 區塊 -->
        <section class="grid gap-10 lg:grid-cols-[3fr,2fr] items-center">
          <!-- 左側文案 -->
          <div class="space-y-6">
            <div class="inline-flex items-center gap-2 rounded-full border border-emerald-400/30 bg-emerald-400/10 px-3 py-1 text-[11px] text-emerald-200 shadow shadow-emerald-500/20">
              <span class="inline-block h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
              <span>校園任務委託 · 由學生自發組成的「陶吉騎士團」</span>
            </div>

            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-slate-50">
              把「需要幫忙」變成任務，<br class="hidden sm:block" />
              交給校園裡的<span class="bg-gradient-to-r from-indigo-400 via-fuchsia-400 to-amber-300 bg-clip-text text-transparent">騎士們</span>。
            </h1>

            <p class="text-sm sm:text-base text-slate-300 leading-relaxed">
              「陶吉騎士團任務板」是專屬校園的互助平台。<br class="hidden sm:block" />
              你可以發布作業、代買、借物等委託，由同校同學接單完成。<br />
              不需要學校 Email，但
              <span class="font-medium text-slate-100">
                每個「學校 + 部別 + 年級 + 班級 + 座號」只能綁定一個帳號
              </span>，
              保障身分真實與公平。
            </p>

            <div class="flex flex-wrap items-center gap-3">
              <a
                href="login.html"
                class="inline-flex items-center gap-2 rounded-full bg-indigo-500 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-500/40 hover:bg-indigo-400"
              >
                立即登入開始使用
                <span class="text-xs opacity-80">（限校內同學）</span>
              </a>
              <a
                href="#features"
                class="inline-flex items-center gap-1 rounded-full border border-slate-500/70 px-4 py-2 text-xs sm:text-sm text-slate-200 hover:bg-slate-800/60"
              >
                先看看有哪些功能
                <span class="text-slate-400">↓</span>
              </a>
            </div>

            <!-- 小亮點列 -->
            <div class="grid grid-cols-3 gap-3 max-w-md pt-2 text-xs text-slate-300">
              <div class="border border-slate-700/80 bg-slate-900/60 rounded-2xl px-3 py-2 shadow-sm shadow-black/40">
                <div class="text-[11px] text-slate-400 mb-1">任務類型</div>
                <div class="font-semibold text-slate-50">作業 · 借物 · 代買</div>
              </div>
              <div class="border border-slate-700/80 bg-slate-900/60 rounded-2xl px-3 py-2 shadow-sm shadow-black/40">
                <div class="text-[11px] text-slate-400 mb-1">信任系統</div>
                <div class="font-semibold text-slate-50">Knight 等級徽章</div>
              </div>
              <div class="border border-slate-700/80 bg-slate-900/60 rounded-2xl px-3 py-2 shadow-sm shadow-black/40">
                <div class="text-[11px] text-slate-400 mb-1">專屬聊天室</div>
                <div class="font-semibold text-slate-50">一單一房間</div>
              </div>
            </div>
          </div>

          <!-- 右側假 UI 預覽 -->
          <div class="lg:justify-self-end">
            <div
              class="relative rounded-3xl border border-slate-700/80 bg-slate-900/80 shadow-2xl shadow-black/60 px-4 py-4 sm:px-5 sm:py-5 max-w-sm mx-auto">
              <!-- 假 Tab 標題 -->
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-1">
                  <span class="h-1.5 w-1.5 rounded-full bg-rose-500/80"></span>
                  <span class="h-1.5 w-1.5 rounded-full bg-amber-400/80"></span>
                  <span class="h-1.5 w-1.5 rounded-full bg-emerald-400/80"></span>
                </div>
                <span class="text-[11px] text-slate-400">任務廣場 · 預覽</span>
              </div>

              <div class="space-y-2 text-xs">
                <div class="rounded-xl bg-slate-800/80 border border-slate-700 px-3 py-2">
                  <div class="flex items-center justify-between gap-2">
                    <div class="text-[11px] text-emerald-300 font-semibold">
                      【開放中】數學作業解題救星
                    </div>
                    <span class="text-[10px] text-slate-400">酬勞：飲料一杯</span>
                  </div>
                  <p class="mt-1 text-[11px] text-slate-300 line-clamp-2">
                    明天二節數學要交，想找人一起對答案、補上沒聽懂的題目…
                  </p>
                  <div class="mt-2 flex items-center justify-between text-[10px] text-slate-400">
                    <span>發布者：🌙 小月月 · J3</span>
                    <span>截止：今天晚自習前</span>
                  </div>
                </div>

                <div class="rounded-xl bg-slate-800/70 border border-slate-700 px-3 py-2">
                  <div class="flex items-center justify-between gap-2">
                    <div class="text-[11px] text-emerald-300 font-semibold">
                      【開放中】美術報告印刷求助
                    </div>
                    <span class="text-[10px] text-slate-400">酬勞：小點心</span>
                  </div>
                  <p class="mt-1 text-[11px] text-slate-300 line-clamp-2">
                    沒時間去印店，有沒有同學可以順便幫忙印 3 張…
                  </p>
                  <div class="mt-2 flex items-center justify-between text-[10px] text-slate-400">
                    <span>發布者：🎨 阿陶 · H2</span>
                    <span>截止：明天下課前</span>
                  </div>
                </div>

                <div class="rounded-xl bg-slate-800/70 border border-slate-700/80 px-3 py-2">
                  <div class="flex items-center justify-between gap-2">
                    <div class="text-[11px] text-sky-300 font-semibold">
                      【已完成】自然實驗筆記整理
                    </div>
                    <span class="text-[10px] text-amber-300">Knight ★★★</span>
                  </div>
                  <p class="mt-1 text-[11px] text-slate-300 line-clamp-2">
                    任務完成！雙方互給 5 星好評，信任分 +10。
                  </p>
                </div>
              </div>

              <div class="mt-4 flex items-center justify-between gap-2">
                <button
                  class="flex-1 rounded-full bg-indigo-500/90 text-[11px] font-semibold text-white py-1.5 hover:bg-indigo-400">
                  我要發布任務
                </button>
                <button
                  class="flex-1 rounded-full border border-slate-600 text-[11px] text-slate-200 py-1.5 hover:bg-slate-800/80">
                  先看看其他任務
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- 功能介紹 -->
        <section id="features" class="mt-16 space-y-4">
          <h2 class="text-xl font-semibold text-slate-50">
            為什麼要用「陶吉騎士團任務板」？
          </h2>
          <p class="text-sm text-slate-400">
            我們希望把「不好意思開口」的求助，變成一個清楚安全的任務系統，讓同學在
            <span class="font-medium text-slate-100">可控、可追蹤</span> 的環境下互相幫忙。
          </p>

          <div class="grid gap-4 md:grid-cols-3">
            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4 shadow-lg shadow-black/40">
              <div class="mb-2 inline-flex h-8 w-8 items-center justify-center rounded-xl bg-indigo-500/20 text-indigo-300">
                📋
              </div>
              <h3 class="text-sm font-semibold text-slate-50 mb-1">
                任務發佈 & 接單
              </h3>
              <p class="text-xs text-slate-300 leading-relaxed">
                用表單快速發布作業、借物、代買等委託。<br />
                當同學接下任務後，任務會從「公開」變成「專屬配對」。
              </p>
            </div>

            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4 shadow-lg shadow-black/40">
              <div class="mb-2 inline-flex h-8 w-8 items-center justify-center rounded-xl bg-emerald-500/20 text-emerald-300">
                💬
              </div>
              <h3 class="text-sm font-semibold text-slate-50 mb-1">
                一任務一聊天室
              </h3>
              <p class="text-xs text-slate-300 leading-relaxed">
                任務雙方有專屬聊天室，<span class="font-medium text-slate-100">只有這兩人能看到</span>。<br />
                可即時討論細節、傳圖，並有已讀紀錄。
              </p>
            </div>

            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4 shadow-lg shadow-black/40">
              <div class="mb-2 inline-flex h-8 w-8 items-center justify-center rounded-xl bg-amber-500/20 text-amber-300">
                🛡️
              </div>
              <h3 class="text-sm font-semibold text-slate-50 mb-1">
                Knight 信任分與評價
              </h3>
              <p class="text-xs text-slate-300 leading-relaxed">
                每完成一個任務就可以互相評價，累積 Knight 信任分與等級徽章，<br />
                好騎士一眼就看得出來。
              </p>
            </div>
          </div>
        </section>

        <!-- 使用流程 -->
        <section id="how" class="mt-16 space-y-4">
          <h2 class="text-xl font-semibold text-slate-50">
            三個步驟，開始你的第一個任務
          </h2>

          <div class="grid gap-4 md:grid-cols-3 text-sm">
            <div class="relative rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <div class="mb-2 inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-800 text-[11px]">
                STEP 1
              </div>
              <h3 class="text-sm font-semibold mb-1">登入 / 註冊</h3>
              <p class="text-xs text-slate-300">
                使用任意 Email 註冊，並填寫學校、部別、年級、班級、座號。<br />
                <span class="font-medium">同一個座號只能綁定一個帳號。</span>
              </p>
            </div>

            <div class="relative rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <div class="mb-2 inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-800 text-[11px]">
                STEP 2
              </div>
              <h3 class="text-sm font-semibold mb-1">發任務 / 接任務</h3>
              <p class="text-xs text-slate-300">
                用清楚的標題與酬勞發布委託，或在「任務廣場」中挑一個適合你的任務接下來。
              </p>
            </div>

            <div class="relative rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <div class="mb-2 inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-800 text-[11px]">
                STEP 3
              </div>
              <h3 class="text-sm font-semibold mb-1">完成 · 評價 · 升級 Knight</h3>
              <p class="text-xs text-slate-300">
                任務完成後互相給評價，累積信任分，解鎖更高 Knight 等級。<br />
                你的每一次幫忙，都會被記錄下來。
              </p>
            </div>
          </div>

          <div class="mt-4 flex flex-wrap items-center gap-3">
            <a
              href="register.html"
              class="inline-flex items-center gap-2 rounded-full bg-indigo-500 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-500/40 hover:bg-indigo-400"
            >
              我是第一次來 · 我要註冊
            </a>
            <a
              href="login.html"
              class="inline-flex items-center gap-2 rounded-full border border-slate-500 px-4 py-2 text-xs sm:text-sm text-slate-100 hover:bg-slate-800/70"
            >
              我已經有帳號 · 直接登入
            </a>
          </div>
        </section>

        <!-- 安全與校園限定 -->
        <section id="safe" class="mt-16 space-y-4">
          <h2 class="text-xl font-semibold text-slate-50">
            校園限定 · 資料安全 · 透明互評
          </h2>

          <div class="grid gap-4 md:grid-cols-2 text-xs sm:text-sm">
            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <h3 class="text-sm font-semibold mb-1 text-slate-100">
                ✅ 校園限定身分
              </h3>
              <p class="text-slate-300 leading-relaxed">
                註冊時必須選擇學校與部別，系統會依你所屬學校顯示任務列表。<br />
                <span class="font-medium">一般人無法進來亂發任務</span>，只服務同校學生。
              </p>
            </div>

            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <h3 class="text-sm font-semibold mb-1 text-slate-100">
                🔒 隱私與權限
              </h3>
              <p class="text-slate-300 leading-relaxed">
                Firestore 規則限制：每個人只能編輯自己的資料；<br />
                任務細節與聊天內容只對任務雙方開放，評價則可以被公開瀏覽，方便判斷可靠度。
              </p>
            </div>

            <div class="rounded-2xl border border-slate-700 bg-slate-900/70 p-4">
              <h3 class="text-sm font-semibold mb-1 text-slate-100">
                🧾 一人一座號限制
              </h3>
              <p class="text-slate-300 leading-relaxed">
                每個「學校 + 部別 + 年級 + 班級 + 座號」只能註冊一次。<br />
                如果有人試圖用同一個座號重複註冊，系統會提示已有人使用。
              </p>
            </div>
          </div>

          <p class="text-[11px] text-slate-500 mt-2">
            ※ 平台使用 Firebase Auth + Firestore 作為後端，並透過 SCHOOL_CONFIG 管理不同學校與部別。
          </p>
        </section>

        <!-- 使用條款 -->
<section id="terms" class="mt-16 space-y-4">
  <h2 class="text-xl font-semibold text-slate-50">
    平台使用條款（簡版）
  </h2>
  <p class="text-xs sm:text-sm text-slate-300">
    以下是「陶吉騎士團任務板」的主要規範，註冊與使用平台代表你已閱讀並同意這些內容。
  </p>

  <div class="rounded-2xl border border-slate-800 bg-slate-950/80 p-4 sm:p-5 space-y-3 text-xs sm:text-sm text-slate-200">
    <div>
      <h3 class="font-semibold text-slate-50 mb-1">一、帳號與身分</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-300">
        <li>每位學生僅能註冊一個帳號，同一個「學校＋部別＋年級＋班級＋座號」不得重複註冊。</li>
        <li>請妥善保管密碼，不得將帳號借給他人使用。</li>
        <li>不得假冒他人身分、填寫虛假資料。</li>
      </ul>
    </div>

    <div>
      <h3 class="font-semibold text-slate-50 mb-1">二、任務內容與雙方責任</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-300">
        <li>不得發布違反校規、法律、或明顯不適當的任務（例如：暴力、色情、霸凌、散播他人隱私）。</li>
        <li>任務雙方應盡力完成約定內容並守時，如有變動請於聊天室說明。</li>
        <li>平台僅提供媒合與紀錄功能，實際互動由雙方自行負責。</li>
      </ul>
    </div>

    <div>
      <h3 class="font-semibold text-slate-50 mb-1">三、聊天與互動規範</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-300">
        <li>請保持基本禮貌，不得使用辱罵、歧視、性別刻板印象等言語。</li>
        <li>不得在平台上散佈謠言、傳遞惡意截圖或人身攻擊。</li>
        <li>若遇到騷擾或不當內容，可以使用首頁的「檢舉」功能回報。</li>
      </ul>
    </div>

    <div>
      <h3 class="font-semibold text-slate-50 mb-1">四、資料與隱私</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-300">
        <li>平台會記錄你的任務紀錄、評價與 Knight 信任分數，用來顯示個人可信度。</li>
        <li>學號、班級等資料僅用於校內識別，不會公開顯示完整個資。</li>
        <li>若需調整或刪除個人資料，可透過平台開發者或學校窗口協助處理。</li>
      </ul>
    </div>

    <div>
      <h3 class="font-semibold text-slate-50 mb-1">五、違規處理</h3>
      <ul class="list-disc list-inside space-y-1 text-slate-300">
        <li>若多次被檢舉經查證屬實，平台有權暫停或停用帳號。</li>
        <li>嚴重違規（例如恐嚇、惡意欺騙等）可能由學校進一步依校規處理。</li>
      </ul>
    </div>

    <p class="text-[11px] text-slate-400 pt-2 border-t border-slate-800 mt-2">
      ※ 本條款為校園實驗專案用的簡化版本，未來可能依實際情況微調。若有重大變更會再公告。
    </p>
  </div>
</section>


        <!-- Q&A 常見問題 -->
<section id="faq" class="mt-16 space-y-4">
  <h2 class="text-xl font-semibold text-slate-50">
    常見問題 Q&A
  </h2>
  <p class="text-xs sm:text-sm text-slate-300">
    第一次使用「陶吉騎士團任務板」可以先看看這裡，如果還有問題，再用下方的表單提問。
  </p>

  <div class="space-y-2">
    <!-- 問題 1 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q1. 我一定要用真實姓名嗎？會不會被大家看到？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        註冊時會記錄你的學校、年級、班級、座號，但是在平台上主要顯示的是你設定的「暱稱」與 Knight 等級。
        一般使用者看不到你的完整個資，只會在必要時由管理者或學校端查詢。
      </div>
    </details>

    <!-- 問題 2 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q2. 如果對方接了任務卻沒來，怎麼辦？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        建議先在聊天室詢問狀況，確認是否是時間搞錯或臨時有事。
        若對方多次失約，你可以在任務完成或結束後給予較低的評價，系統會反映在對方的 Knight 信任分數上。
        如果狀況嚴重，也可以透過首頁的檢舉表單回報。
      </div>
    </details>

    <!-- 問題 3 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q3. 平台可以用來交易現金、點數或線上遊戲帳號嗎？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        本平台主要設計給校園內的「互助任務」使用，不鼓勵也不建議涉及大量金錢或線上帳號交易。
        如有金錢相關行為，請務必小心，並自行承擔風險；若任務內容明顯不當，管理者有權下架與停用帳號。
      </div>
    </details>

    <!-- 問題 4 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q4. 我發的任務可以刪掉或修改嗎？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        在任務還是「開放中」時，你可以修改內容或關閉任務。
        如果已經有人接單，請先在聊天室說明並與對方協調；避免突然取消，影響自己的評價與信任分數。
      </div>
    </details>

    <!-- 問題 5 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q5. Knight 信任等級要怎麼提升？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        多完成任務、準時赴約、保持良好溝通，並且獲得對方的正向評價，你的 Knight Trust 分數就會往上升。
        之後也會加入更多徽章與成就系統，讓可靠的同學更容易被看見。
      </div>
    </details>
     <!-- 問題 6：學校表單 -->
    <details
      class="group rounded-2xl border border-slate-800 bg-slate-950/80 px-4 py-3 text-xs sm:text-sm text-slate-200">
      <summary
        class="flex cursor-pointer items-center justify-between gap-2 list-none">
        <span class="font-medium text-slate-50">
          Q6. 沒有自己的學校怎麼辦？
        </span>
        <span
          class="text-[11px] text-slate-400 group-open:rotate-90 transition-transform">
          ▶
        </span>
      </summary>
      <div class="mt-2 text-slate-300">
        如果在註冊時找不到自己的學校，可以先使用下方的學校表單填寫資料，
        提交想新增的學校名稱與部別，我會視情況把這間學校加進系統裡。
      </div>
    </details>
  </div>
  <!-- 學校新增申請表單 -->
<!-- FAQ 下面，提問 / 檢舉上面 -->
<section id="school-request" class="mt-16 space-y-4">
  <h2 class="text-xl font-semibold text-slate-50">
    找不到自己的學校？
  </h2>
  <p class="text-xs sm:text-sm text-slate-300">
    如果註冊時下拉選單裡沒有你的學校，可以在這裡填單，開發者會審核後視情況加入系統。
  </p>

  <form
    id="schoolRequestForm"
    class="rounded-2xl border border-slate-700 bg-slate-900/80 p-4 space-y-3 max-w-2xl"
  >
    <!-- 第一排：學校名稱 + 層級 -->
    <div class="grid gap-3 md:grid-cols-2">
      <div>
        <label class="block text-xs text-slate-400 mb-1">學校名稱（必填）</label>
        <input
          type="text"
          id="schoolRequestName"
          class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          placeholder="例：衛道中學"
          required
        />
      </div>

      <div>
        <label class="block text-xs text-slate-400 mb-1">主要層級（必填）</label>
        <select
          id="schoolRequestLevel"
          class="w-full rounded-xl border border-slate-600 bg-slate-950 px-3 py-2 text-xs sm:text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        >
          <option value="junior">國中部</option>
          <option value="senior">高中 / 高職</option>
          <option value="elementary">國小</option>
          <option value="college">大學 / 專科</option>
          <option value="other">其他 / 複合</option>
        </select>
      </div>
    </div>

    <!-- 第二排：年級數 / 每年級班級數 / 每班最大人數 -->
    <div class="grid gap-3 md:grid-cols-3">
      <div>
        <label class="block text-xs text-slate-400 mb-1">年級數（必填）</label>
        <input
          type="number"
          id="schoolGradeCount"
          min="1"
          max="9"
          class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          placeholder="例：3"
          required
        />
      </div>

      <div>
        <label class="block text-xs text-slate-400 mb-1">每個年級最多幾班（必填）</label>
        <input
          type="number"
          id="schoolClassCount"
          min="1"
          max="40"
          class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          placeholder="例：17"
          required
        />
      </div>

      <div>
        <label class="block text-xs text-slate-400 mb-1">每班最大人數（必填）</label>
        <input
          type="number"
          id="schoolMaxSeat"
          min="1"
          max="60"
          class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          placeholder="例：50"
          required
        />
      </div>
    </div>

    <!-- 補充說明 -->
    <div>
      <label class="block text-xs text-slate-400 mb-1">補充說明（選填）</label>
      <textarea
        id="schoolRequestComment"
        rows="3"
        class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        placeholder="例：只使用國中部；或是某年級班級數特別多、特別少等…"
      ></textarea>
    </div>

    <p
      id="schoolRequestMessage"
      class="text-[11px] text-slate-400 min-h-[1.2rem]"
    ></p>

    <button
      type="submit"
      class="inline-flex items-center gap-1 rounded-full bg-slate-700 px-4 py-1.5 text-xs font-semibold text-slate-50 shadow hover:bg-slate-600"
    >
      送出新增學校申請
    </button>
  </form>
</section>


</section>
        <!-- 提問 / 檢舉（前端表單 UI，之後可串 Firestore 或 Email） -->
        <section id="report" class="mt-16 mb-12 space-y-4">
  <h2 class="text-xl font-semibold text-slate-50">
    提問 / 回報問題 / 檢舉
  </h2>
  <p class="text-xs sm:text-sm text-slate-300">
    如果你對平台有任何疑問、想回報 Bug，或遇到不當任務 / 聊天內容，可以在這裡寫下來。<br />
    （現在會寫入 Firestore 的 reports 集合，讓管理者可以統一查看。）
  </p>

  <form
    id="reportForm"
    class="rounded-2xl border border-slate-700 bg-slate-900/80 p-4 space-y-3 max-w-2xl">

    <div class="grid gap-3 md:grid-cols-2">
      <div>
        <label class="block text-xs text-slate-400 mb-1">你的暱稱 / 班級（可填可不填）</label>
        <input
  type="text"
  id="reportName"
  class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
  placeholder="例如：302 小明 / H2-12"
/>

      </div>
      <div>
        <label class="block text-xs text-slate-400 mb-1">問題類型</label>
        <select
          id="reportType"
          class="w-full rounded-xl border border-slate-600 bg-slate-950 px-3 py-2 text-xs sm:text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <option value="question">一般提問</option>
          <option value="bug">功能 Bug 回報</option>
          <option value="abuse">不當任務 / 騷擾檢舉</option>
          <option value="other">其他</option>
        </select>
      </div>
    </div>

    <div>
      <label class="block text-xs text-slate-400 mb-1">內容</label>
      <textarea
  id="reportContent"
  rows="4"
  class="w-full rounded-xl border border-slate-600 bg-white px-3 py-2 text-xs sm:text-sm text-slate-800 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
  placeholder="請盡量寫清楚發生了什麼事（例如任務標題、對方暱稱、時間點…）"
></textarea>
    </div>

    <p id="reportMessage" class="text-[11px] text-slate-400 min-h-[1.2rem]">
      <!-- 提交結果訊息會顯示在這裡 -->
    </p>

    <button
      type="submit"
      class="inline-flex items-center gap-1 rounded-full bg-slate-700 px-4 py-1.5 text-xs font-semibold text-slate-50 shadow hover:bg-slate-600">
      送出
    </button>
  </form>
</section>

      </div>
    </main>

    <!-- Footer -->
    <footer class="relative z-10 border-t border-slate-800/60 bg-slate-950/80 backdrop-blur">
      <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-2 text-[11px] text-slate-500">
        <div>
          © <span class="font-medium">陶吉騎士團任務板</span>
          <span class="mx-1">·</span>
          校園任務委託與互助平台
        </div>
        <div class="flex items-center gap-2">
          <span>由 <span class="font-semibold text-slate-300">Taotaotaoki</span> 製作 · Firebase 驅動</span>
        </div>
      </div>
    </footer>
  </div>
  <script type="module">
  import {
    initializeApp
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";

  import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

  // ⭐ 新增：為了拿到 currentUser（可以記住誰送出的學校）
  import {
    getAuth,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBGbRsMSuSoW4rx11n6T1Kz8KyLTRqzHvU",
    authDomain: "taoki-knight-board.firebaseapp.com",
    projectId: "taoki-knight-board",
    storageBucket: "taoki-knight-board.firebasestorage.app",
    messagingSenderId: "319225747276",
    appId: "1:319225747276:web:5556b601dca17e760121e9"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // ===== 目前登入使用者（可能為 null）=====
  let currentUser = null;
  onAuthStateChanged(auth, (user) => {
    currentUser = user || null;
  });

  // ===== 提問 / 檢舉表單 =====
  const reportForm = document.getElementById("reportForm");
  const reportName = document.getElementById("reportName");
  const reportType = document.getElementById("reportType");
  const reportContent = document.getElementById("reportContent");
  const reportMessage = document.getElementById("reportMessage");

  if (reportForm) {
    reportForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      reportMessage.textContent = "";

      const name = reportName.value.trim();
      const type = reportType.value;
      const content = reportContent.value.trim();

      if (!content) {
        reportMessage.textContent = "請至少簡單填寫一下發生的狀況。";
        return;
      }

      try {
        await addDoc(collection(db, "reports"), {
          name: name || null,
          type,
          content,
          status: "open",              // ✅ 預設狀態：待處理
          createdAt: serverTimestamp(),
          userAgent: navigator.userAgent || null,
        });

        reportMessage.textContent = "已送出，感謝你的提問 / 回報！";
        reportContent.value = "";
      } catch (err) {
        console.error(err);
        reportMessage.textContent = "送出失敗，請稍後再試一次。";
      }
    });
  }

  // ===== 新增學校申請表單（重點：你的 addDoc 放在這）=====
  const schoolRequestForm = document.getElementById("schoolRequestForm");
const schoolRequestName = document.getElementById("schoolRequestName");
const schoolRequestLevel = document.getElementById("schoolRequestLevel");
const schoolGradeCount = document.getElementById("schoolGradeCount");
const schoolClassCount = document.getElementById("schoolClassCount");
const schoolMaxSeat = document.getElementById("schoolMaxSeat");
const schoolRequestComment = document.getElementById("schoolRequestComment");
const schoolRequestMessage = document.getElementById("schoolRequestMessage");

  if (schoolRequestForm) {
  schoolRequestForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    schoolRequestMessage.textContent = "";

    const name = schoolRequestName.value.trim();
    const level = schoolRequestLevel.value;
    const comment = schoolRequestComment.value.trim();

    const gradeCount = parseInt(schoolGradeCount.value, 10);
    const classCount = parseInt(schoolClassCount.value, 10);
    const maxSeat = parseInt(schoolMaxSeat.value, 10);

    // 基本檢查
    if (!name) {
      schoolRequestMessage.textContent = "請先輸入學校名稱。";
      return;
    }
    if (!Number.isInteger(gradeCount) || gradeCount <= 0) {
      schoolRequestMessage.textContent = "請填寫正確的年級數。";
      return;
    }
    if (!Number.isInteger(classCount) || classCount <= 0) {
      schoolRequestMessage.textContent = "請填寫正確的每年級班級數。";
      return;
    }
    if (!Number.isInteger(maxSeat) || maxSeat <= 0) {
      schoolRequestMessage.textContent = "請填寫正確的每班最大人數。";
      return;
    }

    try {
      await addDoc(collection(db, "school_requests"), {
        schoolName: name,
        level,
        gradeCount,      // ✅ 年級數
        classCount,      // ✅ 每年級班級數
        maxSeatPerClass: maxSeat, // ✅ 每班最大人數
        comment: comment || "",
        createdAt: serverTimestamp(),
        uid: currentUser ? currentUser.uid : "(未登入)"
      });

      schoolRequestMessage.style.color = "rgb(34 197 94)"; // 綠色
      schoolRequestMessage.textContent = "已送出，感謝你提供學校資訊！";

      schoolRequestForm.reset();
      schoolRequestLevel.value = "junior";
    } catch (err) {
      console.error(err);
      schoolRequestMessage.style.color = "rgb(248 113 113)"; // 紅色
      schoolRequestMessage.textContent = "送出失敗，請稍後再試一次。";
    }
  });
}

</script>


</body>
</html>
